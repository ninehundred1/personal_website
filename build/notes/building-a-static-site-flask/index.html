<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Welcome | Nathan Hefner</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/components/ionicons/css/ionicons.css">

    <script src="https://use.typekit.net/fti0giy.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/static/js/prettify.js"></script>
    <script src="/static/js/app.js"></script>
  </head>
  <body onload="prettyPrint()">
    
    <header class="site-header">
      <div class="wrapper">
        <a class="site-title" href="/">Nathan Hefner</a>
        <nav class="site-nav">
          <div class="trigger">
            <a class="page-link" href="/about/">About</a>
            <a class="page-link" href="/notes/">Notes</a>
            <a class="page-link" href="/work/">Work</a>
          </div>
        </nav>
      </div>
    </header>
    

    
<section class="hero-unit" style="background-image: url(/static/img/posts/2.jpg);">
  <div class="overlay"></div>
  <div class="inner">
    <h1>Building A Static Site With Flask</h1>
    <p class="post-meta">Posted: August 22, 2015</p>
  </div>
</section>


    <section class="content">
      <div class="wrapper">
        
<div class="post">

  <div class="post-content">
    <p>I have bounced around from blog frameworks a lot since I started running a personal website. First was WordPress, then OctoPress, then Jekyll, back to WordPress, on to Ghost, back to Jekyll - I never felt truly comfortable or happy with what I was using, and as a result spent more time bouncing around frameworks than actually writing. As a result, I have decided to craft a semi homegrown solution - a static site generator built with <a href="http://flask.pocoo.org/">Flask</a>.</p>
<p>As it turns out, creating a static site generator with Flask was much easier than I expected, thanks to two incredibly useful plugins - <a href="https://github.com/SimonSapin/Flask-FlatPages/">Flask FlatPages</a> and <a href="https://github.com/SimonSapin/Frozen-Flask/">Frozen Flask</a>. Flask FlatPages is used to build pages from static files (I.E. markdown files) using Flask routes. Frozen Flask is a tool that can generate a static site for your Flask application. By leveraging these two plugins, 90% of your work is already done. All you need to do is set up your Flask app and the rest is taken care of. Below is the app.py file I use to generate my site:</p>
<pre><code class="python">import sys

from flask import Flask, render_template
from flask_flatpages import FlatPages
from flask_frozen import Freezer


DEBUG = True
FLATPAGES_EXTENSION = '.md'
FLATPAGES_ROOT = 'posts'
FLATPAGES_AUTO_RELOAD = True
FLATPAGES_MARKDOWN_EXTENSIONS = ['fenced_code']

app = Flask(__name__)
flatpages = FlatPages(app)
freezer = Freezer(app)

app.config.from_object(__name__)


@app.template_filter('date')
def date_filter(s):
    return s.strftime('%B %d, %Y')


@app.template_filter('excerpt')
def excerpt_filter(s):
    paragraphs = s.split('&lt;/p&gt;')
    return paragraphs[0]


@app.route('/')
def home():
    posts = [p for p in flatpages]
    posts.sort(key=lambda item: item['date'], reverse=True)
    return render_template('pages/home.html', posts=posts)


@app.route('/about/')
def about():
    return render_template('pages/about.html')


@app.route('/work/')
def work():
    return render_template('pages/work.html')


@app.route('/notes/')
def notes():
    posts = [p for p in flatpages]
    posts.sort(key=lambda item: item['date'], reverse=True)
    return render_template('pages/notes.html', posts=posts)


@app.route('/notes/&lt;name&gt;/')
def note(name):
    post = flatpages.get_or_404(name)
    return render_template('pages/post.html', post=post)


if __name__ == '__main__':
    if len(sys.argv) &gt; 1 and sys.argv[1] == 'build':
        freezer.freeze()
    else:
        app.run(host='0.0.0.0', port=8888, debug=True)
</code></pre>

<p>The code should look pretty straightforward as long as you are familiar with Python and Flask. All this file does is create a Flask app, configure Flask Flatpages, define a few custom Jinja filters, define our routes, and add commands to run the app and to build the static site using Frozen Flask.</p>
<p>All of the blog posts get stored in a folder named "Posts". Flask Flatpages then is able to turn those posts into a page. The markdown file's name will then become the URL for your post. To build the app, you simply have to do is run: </p>
<pre><code>python app.py build
</code></pre>

<p>and your static site will be generated in a "build" directory. To see a full working example, you can check out the <a href="https://github.com/natehefner/nhefner">repo</a> for my site. Happy coding!</p>
  </div>

</div>

      </div>
    </section>

    
    <footer class="site-footer">
      <div class="wrapper">
        <ul class="social-links">
          <li><a href="https://github.com/natehefner"><i class="icon ion-social-octocat"></i></a></li>
          <li><a href="https://instagram.com/natehefner_"><i class="icon ion-social-instagram"></i></a></li>
          <li><a href="https://twitter.com/natehefner"><i class="icon ion-social-twitter"></i></a></li>
          <li><a href="https://linkedin.com/in/nathanhefner"><i class="icon ion-social-linkedin"></i></a></li>
        </ul>
        <div class="email">
          <a href="mailto:hefner.nathan@gmail.com">Email Me</a>
        </div>
      </div>
    </footer>
    

    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-41594454-1', 'auto');
    ga('send', 'pageview');
    </script>
    
  </body>
</html>